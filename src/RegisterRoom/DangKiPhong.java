/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package RegisterRoom;

import java.sql.Connection;
import java.sql.SQLException;
import javax.swing.JOptionPane;
import oracle.jdbc.internal.ResultSetCache;
import java.sql.*;
import com.formdev.flatlaf.FlatLightLaf;
import javax.swing.UIManager;


/**
 *
 * @author Admin
 */
public class DangKiPhong extends javax.swing.JFrame {
     public String tenToa ;
     public String loaiPhong ;
     public  String gioiTinh;
     
    /**
     * Creates new form DangKiPhong
     */
    public DangKiPhong() {
        initComponents();
        loadToaToComboBox();
        loadLoaiPhongComboBox();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jComboBox1 = new javax.swing.JComboBox<>();
        jComboBox3 = new javax.swing.JComboBox<>();
        jComboBox2 = new javax.swing.JComboBox<>();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Tòa A", "Tòa B", "Tòa C" }));
        jComboBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox1ActionPerformed(evt);
            }
        });

        jComboBox3.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Phòng 8 sinh viên", "Phòng 10 sinh viên" }));
        jComboBox3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox3ActionPerformed(evt);
            }
        });

        jComboBox2.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Nam", "Nữ" }));
        jComboBox2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox2ActionPerformed(evt);
            }
        });

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jTextArea1.setText("THÔNG TIN SINH VIÊN Ở KTX ĐHQG-HCM ĐĂNG KÝ Ở NH 2024 - 2025\n \nĐể đảm bảo thời gian đăng ký ở Ký túc xá trực tuyến, sinh viên chuẩn bị đầy đủ file hình sau:\n* Thẻ căn cước công dân/mã số định danh cá nhân;\n* Thẻ Bảo hiểm Y tế;\n* Giấy tờ minh chứng sinh viên:\n  1. Đối với Tân sinh viên: Làm thủ tục nhập học ở trường trước khi đăng ký ở Ký túc xá (Xem thêm tại đây)\n\n      - Sinh viên các trường thuộc ĐHQG-HCM: Thẻ sinh viên/Giấy biên nhận hồ sơ nhập học/Giấy xác nhận đã nhập học.\n\n      - Sinh viên các trường ngoài ĐHQG-HCM: Giấy xác nhận có đóng dấu của nhà trường.\n\n  2. Đối với sinh viên năm 2 trở lên (Xem thêm tại đây)\n\n      - Sinh viên các trường thuộc ĐHQG-HCM: Thẻ sinh viên/Giấy xác nhận sinh viên/Thời khoá biểu học tập.\n\n      - Sinh viên các trường ngoài ĐHQG-HCM: Giấy xác nhận có đóng dấu của nhà trường.\n\n* Hình ảnh chân dung\n\n      - Lưu ý:\n\nẢnh mới chụp: không quá 6 tháng.\nTỉ lệ ảnh: 4 x 6.\nTỉ lệ diện tích khuôn mặt: chiếm khoảng 75% diện tích ảnh.\nChiều cao từ mắt lên mép trên của ảnh: xấp xỉ 2/3 chiều cao từ mắt xuống mép dưới của ảnh.\nGóc chụp: Mặt nhìn thẳng.\nTrang phục: Đầu để trần, không đeo kính, trang phục gọn gàng lịch sự.\nPhông nền: màu trắng hoặc màu xanh.\nĐịnh dạng file: .jpeg, .png (File ảnh từ điện thoại hoặc từ các thiết bị chụp ảnh kĩ thuật số, Không được chụp lại ảnh thẻ 3x4 hoặc 4x6)\nẢnh gốc: Ảnh được chụp từ điện thoại, không qua các ứng dụng chỉnh sửa ảnh.\nVì ảnh sẽ được sử dụng cho công tác in thẻ và hệ thống nhận diện khuôn mặt (FaceId) tại ký túc xá. Sinh viên sẽ phải hoàn toàn chịu trách nhiệm về việc đăng tải hình ảnh chân dung nếu có sai sót xảy ra.\nSinh viên tìm hiểu kỹ thông tin sau:\n- Thời gian thực hiện đăng ký tối đa 20 phút;\n- Thời gian trả kết quả trong vòng 36 giờ tính từ khi đăng ký thành công.\nVui lòng đọc kỹ thông tin sau:\n1. Danh sách các trường đã ký thoả thuận với Ký túc xá năm học 2024 – 2025.\n\n2. Thời gian ở KTX:\n\n- Thời gian bắt đầu: 01/9/2024.\n\n- Thời gian kết thúc: Sinh viên lựa chọn một trong ba mốc thời gian sau theo kế hoạch học tập của cá nhân:\n\n+ Ngày 30/6/2025;\n\n+ Ngày 31/7/2025;\n\n+ Ngày 31/8/2025 (không dành cho sinh viên năm thứ 4 trở lên).\n\n3. Sinh viên đăng ký ở một học kỳ (từ ngày 01/9/2024 đến 31/01/2025): Trung tâm chỉ xem xét các trường hợp sau:\n\n- Sinh viên có nhu cầu ở cả năm học 2024 - 2025 nhưng chỉ đóng tiền từng học kỳ: Sinh viên có hoàn cảnh khó khăn: Nộp đơn, sổ hộ nghèo/giấy xác nhận gia đình có hoàn cảnh khó khăn (còn thời hạn) hoặc trình bày rõ lý do; các trường hợp đặc biệt khác TTQL KTX&ĐTĐH căn cứ lý do cụ thể để hỗ trợ sinh viên. Sinh viên sắp xếp ở tại phòng cũ, nhà cũ (trong trường hợp thuộc diện chuyển phòng thì tuân thủ theo sự sắp xếp của Ban Quản lý cụm nhà).\n\n- Sinh viên sắp tốt nghiệp: Nộp đơn và minh chứng (thời khoá biểu, lịch học) cho Ban Quản lý cụm nhà. Sinh viên được sắp xếp ở tại nhà E4, KTX Khu B.\n\n- Các trường hợp đặc biệt khác: TTQL KTX&ĐTĐH căn cứ lý do cụ thể để xem xét, giải quyết.\n\n4. Những sinh viên thuộc diện phải làm đơn đăng ký có xác nhận của nhà trường hoặc bản cam kết đối với sinh viên vi phạm nội quy, quy định của Ký túc xá năm học 2023 – 2024 trở về trước, hoàn tất thủ tục theo thông báo trước khi đăng ký (sinh viên tải mẫu đơn tại đây).\n\n5. Sau khi hoàn tất đăng ký, trong vòng 36 giờ, hệ thống sẽ gửi thông báo qua email của sinh viên. Sinh viên đăng nhập vào email đã đăng ký hoặc tài khoản cá nhân trên trang web:  sv.ktxhcm.edu.vn để thực hiện thanh toán online theo hướng dẫn.\n\n5.1. Trường hợp ĐƯỢC duyệt: sinh viên thực hiện thanh toán theo hướng dẫn và trong thời gian 5 ngày kể từ khi được duyệt.\n\n5.2. Trường hợp KHÔNG được duyệt: sinh viên liên hệ Hành chính toà nhà và thực hiện theo hướng dẫn.\n\nTổng đài hỗ trợ: 1900.055.559\n\n1. Phòng Công tác sinh viên: 105\n \n2. Phòng Công nghệ thông tin - Dữ liệu: 114, 115\n\n3. Phòng Kế hoạch tài chính: 112\n\n4. Ban quản lý các cụm nhà: AF: 120, AG: 121, AH: 122, BA: 123, BB: 124, BC: 125, BD: 126, BE: 1");
        jScrollPane1.setViewportView(jTextArea1);

        jButton1.setText("Tìm");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(29, 29, 29)
                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(47, 47, 47)
                .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(50, 50, 50)
                .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, 339, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(67, 67, 67)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 119, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(214, Short.MAX_VALUE))
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 1074, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(649, Short.MAX_VALUE))
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addGap(68, 68, 68)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 587, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(22, Short.MAX_VALUE)))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 23, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        ChonChiTiet dkFrame=new ChonChiTiet(tenToa,loaiPhong,gioiTinh);
        dkFrame.setVisible(true);
        dkFrame.setLocationRelativeTo(null);        // TODO add your handling code here:
    }//GEN-LAST:event_jButton1ActionPerformed
private void loadToaToComboBox() {
    try (Connection conn = ConnectDB.ConnectionUtils.getMyConnectionOracle()) {
        String sql = "SELECT * FROM TOA";
        PreparedStatement stmt = conn.prepareStatement(sql);
        ResultSet rs = stmt.executeQuery();

        jComboBox1.removeAllItems();

        while (rs.next()) {
            String item = rs.getString("TENTOA");
            jComboBox1.addItem(item);
        }

        rs.close();
        stmt.close();
    } catch (SQLException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(this, "Lỗi khi tải dữ liệu: " + ex.getMessage());
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(this, "Không tìm thấy Driver: " + ex.getMessage());
    }
//    this.tenToa=(String) jComboBox1.getSelectedItem();
}
private void loadLoaiPhongComboBox() {
    try (Connection conn = ConnectDB.ConnectionUtils.getMyConnectionOracle()) {
        String sql = "SELECT distinct LoaiPhong FROM Phong";
        PreparedStatement stmt = conn.prepareStatement(sql);
        ResultSet rs = stmt.executeQuery();

        jComboBox3.removeAllItems();

        while (rs.next()) {
            String item = rs.getString("LoaiPhong");
            jComboBox3.addItem(item);
        }

        rs.close();
        stmt.close();
    } catch (SQLException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(this, "Lỗi khi tải dữ liệu: " + ex.getMessage());
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(this, "Không tìm thấy Driver: " + ex.getMessage());
    }
//    loaiPhong=(String)jComboBox3.getSelectedItem();
}

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox1ActionPerformed
         this.tenToa=(String) jComboBox1.getSelectedItem();
//        loadToaToComboBox();
    }//GEN-LAST:event_jComboBox1ActionPerformed

    private void jComboBox3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox3ActionPerformed
        // TODO add your handling code here:
        loaiPhong=(String)jComboBox3.getSelectedItem();
    }//GEN-LAST:event_jComboBox3ActionPerformed

    private void jComboBox2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox2ActionPerformed
        jComboBox2.removeAllItems();
        jComboBox2.addItem("Nam");
        jComboBox2.addItem("Nữ");
    this.gioiTinh=(String) jComboBox2.getSelectedItem();        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBox2ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(DangKiPhong.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(DangKiPhong.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(DangKiPhong.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(DangKiPhong.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
           try {
            // Cài theme FlatLaf sáng
            UIManager.setLookAndFeel(new FlatLightLaf());
        } catch (Exception ex) {
            System.err.println("Không thể cài FlatLaf");
        }
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new DangKiPhong().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JComboBox<String> jComboBox2;
    private javax.swing.JComboBox<String> jComboBox3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    // End of variables declaration//GEN-END:variables
}
